#ifndef NONGFU_SPRING_MOTOR_CONTROL_COMMON_H
#define NONGFU_SPRING_MOTOR_CONTROL_COMMON_H

#ifdef __cplusplus
extern "C" {
#endif

//
// import standard library
//
#include <stdint.h>
#include <stdbool.h>

//
// table of sin and cos function value
//
#define SIN_COS_TABLE_SIZE              0xFF
#define SIN_COS_TABLE {                         \
    0, 807,1614,2419,3224,4026,4826,5623,       \
    6417,7207,7992,8773,9548,10317,11080,       \
    11837,12586,13327,14061,14786,15502,        \
    16208,16905,17592,18267,18932,19585,        \
    20226,20855,21472,22075,22665,23241,        \
    23803,24351,24884,25401,25904,26390,        \
    26861,27315,27753,28173,28577,28963,        \
    29332,29683,30016,30331,30627,30905,        \
    31164,31404,31625,31826,32009,32172,        \
    32315,32439,32543,32628,32692,32737,        \
    32762,32767,32752,32717,32662,32588,        \
    32494,32380,32246,32093,31920,31728,        \
    31517,31286,31037,30768,30481,30176,        \
    29852,29510,29150,28772,28377,27965,        \
    27536,27090,26628,26149,25654,25144,        \
    24619,24079,23524,22955,22372,21775,        \
    21165,20543,19907,19260,18601,17931,        \
    17250,16558,15856,15145,14425,13695,        \
    12958,12212,11459,10700,9933,9161,8383,     \
    7600,6812,6021,5225,4427,3625,2822,2017,    \
    1210,403,-403,-1210,-2017,-2822,-3625,      \
    -4427,-5225,-6020,-6812,-7600,-8383,-9161,  \
    -9933,-10699,-11459,-12212,-12957,-13695,   \
    -14424,-15145,-15856,-16558,-17249,-17931,  \
    -18601,-19260,-19907,-20542,-21165,-21775,  \
    -22372,-22955,-23524,-24079,-24619,-25144,  \
    -25654,-26149,-26627,-27090,-27536,-27965,  \
    -28377,-28772,-29150,-29510,-29852,-30176,  \
    -30481,-30768,-31037,-31286,-31517,-31728,  \
    -31920,-32093,-32246,-32380,-32494,-32588,  \
    -32662,-32717,-32752,-32767,-32762,-32737,  \
    -32692,-32628,-32543,-32439,-32315,-32172,  \
    -32009,-31826,-31625,-31404,-31164,-30905,  \
    -30627,-30331,-30016,-29683,-29332,-28963,  \
    -28577,-28173,-27753,-27315,-26861,-26390,  \
    -25904,-25401,-24884,-24351,-23803,-23241,  \
    -22665,-22075,-21472,-20855,-20226,-19585,  \
    -18932,-18267,-17591,-16905,-16208,-15502,  \
    -14786,-14061,-13327,-12586,-11837,-11080,  \
    -10317,-9548,-8772,-7992,-7207,-6417,-5623, \
    -4826,-4026,-3224,-2419,-1613,-807,0}

static int32_t sin_table[SIN_COS_TABLE_SIZE + 1] = SIN_COS_TABLE; // 256

//
// physical structure
//
typedef struct {
    int32_t ia;
    int32_t ib;
    int32_t ic;
}phase_i;

typedef struct {
    int32_t alpha;
    int32_t beta;
}alpha_beta;

typedef struct {
    int32_t q;
    int32_t d;
}q_d;

//
// define a physical variable
//
#define phase_i_var(name, a, b, c) \
    phase_i name = {a, b, c}
#define alpha_beta_var(name, alpha, beta) \
    alpha_beta name = {alpha, beta}
#define qd_var(name, q, d) \
    qd name = {q, d}

//
// define a physical constant
//
#define phase_i(a, b, c) \
    {a, b, c}
#define alpha_beta(alpha, beta) \
    {alpha, beta}
#define qd(q, d) \
    {q, d}

#ifdef __cplusplus
}
#endif 

#endif // NONGFU_SPRING_MOTOR_CONTROL_COMMON_H